(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();class a{x;y;radius;colour;constructor(e,t,n){this.x=e,this.y=t,this.radius=.5,this.colour=n}draw(e,t){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fillStyle=t,e.fill(),e.closePath()}}class P{palettes;currentPaletteIndex;constructor(e=0){this.palettes=[["#FFC3A0","#FF677D","#D4A5A5","#392F5A","#31A2AC"],["#F4E8C1","#A0C3D2","#7B8BAD","#545E75","#2E2D4D"],["#FAD0C9","#C8C8A9","#83AE9B","#698474","#4B4453"],["#E6E6FA","#D8BFD8","#DDA0DD","#DA70D6","#BA55D3"]],this.currentPaletteIndex=e}getCurrentPalette(){return this.palettes[this.currentPaletteIndex]}setCurrentPalette(e){e>=0&&e<this.palettes.length&&(this.currentPaletteIndex=e)}getRandomColor(){const e=this.getCurrentPalette();return e[Math.floor(Math.random()*e.length)]}}class x{vertices=[];currentPoint;ctx;palette;shouldAnimate=!0;constructor(e,t,n){this.currentPoint=e,this.ctx=t,this.palette=n,this.defineVertices()}stopAnimation(){this.shouldAnimate=!1}play(e){this.shouldAnimate=!0;let t=0;const n=500,r=()=>{if(t<e&&this.shouldAnimate){for(let s=0;s<n;s++)if(t<e){const o=this.vertices[Math.floor(Math.random()*this.vertices.length)];this.currentPoint=new a((this.currentPoint.x+o.x)/2,(this.currentPoint.y+o.y)/2,"#000000"),this.currentPoint.draw(this.ctx,this.palette.getRandomColor()),t++}i=requestAnimationFrame(r)}};let i=requestAnimationFrame(r);return i}}class v extends x{constructor(e,t,n){super(e,t,n)}defineVertices(){this.vertices=[new a(400,100,"#FF0000"),new a(100,500,"#00FF00"),new a(700,500,"#0000FF")]}}class E extends x{defineVertices(){this.vertices=[new a(0,0,"#FF0000"),new a(0,600,"#00FF00"),new a(800,0,"#0000FF"),new a(800,600,"#FFFF00"),new a(400,300,"#FF00FF"),new a(200,300,"#00FFFF"),new a(600,300,"#FFA500"),new a(400,150,"#800080"),new a(400,450,"#008000"),new a(200,150,"#FFC0CB"),new a(600,150,"#FFFFE0"),new a(200,450,"#ADD8E6"),new a(600,450,"#D3D3D3")]}play(e){this.shouldAnimate=!0;let t=0;const n=500,r=()=>{if(t<e&&this.shouldAnimate){for(let s=0;s<n;s++)if(t<e){const o=this.vertices[Math.floor(Math.random()*this.vertices.length)];this.currentPoint=new a((this.currentPoint.x+2*o.x)/3,(this.currentPoint.y+2*o.y)/3,"#000000"),this.currentPoint.draw(this.ctx,this.palette.getRandomColor()),t++}i=requestAnimationFrame(r)}};let i=requestAnimationFrame(r);return i}}class C{vertices=[];currentPoint;rule;ctx;palette;shouldAnimate=!0;constructor(e,t,n,r){this.currentPoint=e,this.rule=t,this.ctx=n,this.palette=r,this.defineVertices()}defineVertices(){const e=new P;this.vertices=[new a(0,0,e.getRandomColor()),new a(0,600,e.getRandomColor()),new a(800,600,e.getRandomColor()),new a(800,0,e.getRandomColor())]}setRule(e){this.rule=e}stopAnimation(){this.shouldAnimate=!1}play(e){return this.shouldAnimate=!0,this.rule.play(this.vertices,this.currentPoint,e,this.ctx,this.palette,()=>this.shouldAnimate)}}class M{play(e,t,n,r,i,s){let o=0,c=Math.floor(Math.random()*e.length);const d=500,h=()=>{if(o<n&&s()){for(let p=0;p<d;p++)if(o<n){let g=Math.floor(Math.random()*3)-1,F=(c+g+e.length)%e.length;c=F;const m=e[F];t=new a((t.x+m.x)/2,(t.y+m.y)/2,m.colour),t.draw(r,i.getRandomColor()),o++}u=requestAnimationFrame(h)}};let u=requestAnimationFrame(h);return u}}class R{play(e,t,n,r,i,s){let o=0,c=-1,d=-1;const h=500,u=()=>{if(o<n&&s()){for(let g=0;g<h;g++)if(o<n){let F=Math.floor(Math.random()*e.length);c!=-1&&c==d&&(F=Math.random()<.5?c:(d+2)%e.length),d=c,c=F;const m=e[F];t=new a((t.x+m.x)/2,(t.y+m.y)/2,m.colour),t.draw(r,i.getRandomColor()),o++}p=requestAnimationFrame(u)}};let p=requestAnimationFrame(u);return p}}class q extends x{defineVertices(){}play(e){this.shouldAnimate=!0;let t=0,n=0,r=0;const i=500,s=()=>{if(r<e&&this.shouldAnimate){for(let c=0;c<i;c++)if(r<e){let d,h;const u=Math.random();u<.01?(d=0,h=.16*n):u<.86?(d=.85*t+.04*n,h=-.04*t+.85*n+1.6):u<.93?(d=.2*t-.26*n,h=.23*t+.22*n+1.6):(d=-.15*t+.28*n,h=.26*t+.24*n+.44),t=d,n=h,new a(400+t*50,600-n*50,this.palette.getRandomColor()).draw(this.ctx,this.palette.getRandomColor()),r++}o=requestAnimationFrame(s)}};let o=requestAnimationFrame(s);return o}}const A=document.getElementById("ChaosGameCanvas"),w=A.getContext("2d");A.width=800;A.height=600;const f=new P,D=document.getElementById("palette-selector-container"),I=document.getElementById("fractal-selector-container");let y;function L(l,e){y&&y.stopAnimation(),w.clearRect(0,0,A.width,A.height),y=l,y.play(e)}function B(){f.palettes.forEach((l,e)=>{const t=document.createElement("div");t.classList.add("palette-option"),t.dataset.paletteIndex=e.toString(),l.forEach(n=>{const r=document.createElement("div");r.classList.add("color-swatch"),r.style.backgroundColor=n,t.appendChild(r)}),t.addEventListener("click",()=>{f.setCurrentPalette(e);const n=document.querySelector(".palette-option.selected");n&&n.classList.remove("selected"),t.classList.add("selected")}),D.appendChild(t)})}function S(){const l={"sierpinski-triangle":{fractal:()=>new v(new a(400,100,"#000000"),w,f),iterations:5e6},"sierpinski-carpet":{fractal:()=>new E(new a(400,300,"#000000"),w,f),iterations:5e6},"four-corner-fractal":{fractal:()=>new C(new a(400,300,"#000000"),new M,w,f),iterations:5e6},"vicsek-fractal":{fractal:()=>new C(new a(400,300,"#000000"),new R,w,f),iterations:5e6},"barnsley-fern":{fractal:()=>new q(new a(0,0,"#000000"),w,f),iterations:5e6}};Array.from(I.children).forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-fractal"),n=l[t];L(n.fractal(),n.iterations);const r=document.querySelector(".fractal-option.selected");r&&r.classList.remove("selected"),e.classList.add("selected")})})}function V(){B(),S(),D.children[0].click(),I.children[0].click()}V();
